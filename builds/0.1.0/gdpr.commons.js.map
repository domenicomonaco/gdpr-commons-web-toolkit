{"version":3,"sources":["gdpr.commons.js"],"names":["eraseCookie","name","document","cookie","setCookie","value","days","JSON","stringify","expires","date","Date","setTime","getTime","toUTCString","getCookie","nameEQ","ca","split","i","length","c","charAt","substring","indexOf","out","parse","config","text","cookieDaysExp","cookieName","linkPrivacyPolicy","textTitleModal","textAbstractModal","textButtonAccept","textButtonOpenPolicy","textAccepted","textNotAccepted","textNotPresent","textButtonResetCookie","modal","showOnPageLoad","fixedicon","show","window","onload","GDPRCOMMONS","getElementById","innerHTML","getAttribute","cookieValue","accepted","addEventListener","console","log","classList","add","remove","location","reload","setTimeout","toDateString"],"mappings":"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","file":"gdpr.commons.js","sourceRoot":"../src","sourcesContent":["/**\n * AUTHOR: Tecnologie per Persone di Domenico Monaco \n * LICENSE: MIT \n * LINK: https://www.gdprcommons.it\n */\n\nfunction eraseCookie(name) {\n    document.cookie = name + '=; Max-Age=-99999999;';\n}\n\nfunction setCookie(name, value, days) {\n    value = JSON.stringify(value);\n    var expires = \"\";\n    if (days) {\n        let date = new Date();\n        date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));\n        expires = \"; expires=\" + date.toUTCString();\n    }\n    document.cookie = name + \"=\" + (value || \"\") + expires + \"; path=/\";\n}\n\nfunction getCookie(name) {\n    let nameEQ = name + \"=\";\n    let ca = document.cookie.split(';');\n    for (var i = 0; i < ca.length; i++) {\n        var c = ca[i];\n        while (c.charAt(0) == ' ') c = c.substring(1, c.length);\n        if (c.indexOf(nameEQ) == 0) {\n            let out = c.substring(nameEQ.length, c.length);\n            return JSON.parse(out);\n        }\n    }\n    return null;\n}\n\nconst config = {\n    text: {\n        cookieDaysExp: 20,\n        cookieName: 'GDPRCommons-cookie',\n        linkPrivacyPolicy: \"http://www.gdprcommons.it\",\n        textTitleModal: \"Informativa Cookie\",\n        textAbstractModal: \"Questo sito utilizza esclusivamente cookie e/o altri strumenti di tracciamento di tipo tecnico o analitici al solo scopo di analisi statistica del traffico senza risalire all'identitÃ  del singolo utente. In oltre, non raccoglie informazioni personali in modo automatico senza esplicito consenso. In alcuni casi sono utilizzate risorse esterne. Ai fini legislativi, a scopo informativo si chiede la consultazione della Privacy Policy e proseguire cliccando su \\'Ho capito\\'\",\n        textButtonAccept: \"Ho capito\",\n        textButtonOpenPolicy: \"Leggi l\\'informativa\",\n        textAccepted: \"Accettato\",\n        textNotAccepted: \"Non accettato\",\n        textNotPresent: \"Nessun dato\",\n        textButtonResetCookie: \"Resetta preferenze\",\n    },\n\n    modal: {\n        showOnPageLoad: 'cookie',\n    },\n\n    fixedicon: {\n        show: true\n    }\n};\n\nwindow.onload = function() {\n\n    const GDPRCOMMONS = document.getElementById(\"GDPR_Commons\");\n    GDPRCOMMONS.innerHTML = `\n  <div id=\"gdpr-commons-fixedicon\">\n    <a href=\"#GDPRCommons-dialog\" id=\"gdpr-commons-button-fixedicon\" class=\"fixedicon\" aria-label=\"Open Cookie Notice\">\n      <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"bi bi-shield-lock-fill\" viewBox=\"0 0 16 16\">\n        <path fill-rule=\"evenodd\" d=\"M8 0c-.69 0-1.843.265-2.928.56-1.11.3-2.229.655-2.887.87a1.54 1.54 0 0 0-1.044 1.262c-.596 4.477.787 7.795 2.465 9.99a11.777 11.777 0 0 0 2.517 2.453c.386.273.744.482 1.048.625.28.132.581.24.829.24s.548-.108.829-.24a7.159 7.159 0 0 0 1.048-.625 11.775 11.775 0 0 0 2.517-2.453c1.678-2.195 3.061-5.513 2.465-9.99a1.541 1.541 0 0 0-1.044-1.263 62.467 62.467 0 0 0-2.887-.87C9.843.266 8.69 0 8 0zm0 5a1.5 1.5 0 0 1 .5 2.915l.385 1.99a.5.5 0 0 1-.491.595h-.788a.5.5 0 0 1-.49-.595l.384-1.99A1.5 1.5 0 0 1 8 5z\"/>\n      </svg>\n    </a>\n  </div><div id=\"gdpr-commons-modal-overlay\"></div>\n  <div id=\"gdpr-commons-modal\">\n    <div class=\"gdpr-commons-modal-header\">\n      <div class=\"gdpr-commons-modal-title\">\n        <h3>${config.text.textTitleModal}</h3>\n      </div>\n    </div>\n    <div class=\"gdpr-commons-modal-content\">\n      <p>\n        ${config.text.textAbstractModal}\n      </p>\n    </div>\n\n    <div class=\"gdpr-commons-modal-middle\">\n      <div>\n      <span id=\"last-consent-state\"></span> <em><span id=\"last-consent-date\"></span></em>\n      </div>\n      <a href=\"${GDPRCOMMONS.getAttribute('data-urlpolicy')}\">${config.text.textButtonOpenPolicy}</a>\n    </div>\n\n      <div class=\"gdpr-commons-modal-footer\">\n        <button id=\"gdpr-commons-button-reset\" class=\"buttons\">${config.text.textButtonResetCookie}</button>\n         <button id=\"gdpr-commons-button-accept\" class=\"buttons\">${config.text.textButtonAccept}</button>\n    </div>\n    <div id=\"gdpr-commons-modal-credits\">\n        <span>Prowdly by <a title=\"GDPR Commons: Open Source GDPR Tookit\" target=\"_blank\" href=\"https://www.gdprcommons.it\">GDPR Commons: Open Source GDPR Tookit</a></spans>\n    </div>\n  </div>\n\n  </div>`;\n\n\n    let cookieValue = {\n        date: null,\n        accepted: false,\n    };\n\n    let cookie = getCookie(config.text.cookieName);\n\n    document.getElementById(\"gdpr-commons-button-accept\").addEventListener('click', function() {\n        cookieValue = {\n            date: Date(),\n            accepted: true,\n        };\n        setCookie(config.text.cookieName, cookieValue, config.text.cookieDaysExp);\n        console.log('Accepted');\n        document.getElementById(\"gdpr-commons-modal-overlay\").classList.add('fadeOUT-display');\n        document.getElementById(\"gdpr-commons-modal\").classList.add('fadeOUT-display');\n\n        document.getElementById(\"gdpr-commons-modal-overlay\").classList.remove('fadeIN-display');\n        document.getElementById(\"gdpr-commons-modal\").classList.remove('fadeIN-display');\n    });\n\n    document.getElementById(\"gdpr-commons-button-reset\").addEventListener('click', function() {\n        cookieValue = {\n            date: Date(),\n            accepted: false,\n        };\n        console.log('Reset');\n        setCookie(config.text.cookieName, cookieValue, config.text.cookieDaysExp);\n        location.reload();\n    });\n\n    document.getElementById(\"gdpr-commons-button-fixedicon\").addEventListener('click',\n        function() {\n            console.log('open');\n            document.getElementById(\"gdpr-commons-modal-overlay\").classList.remove('fadeOUT-display');\n            document.getElementById(\"gdpr-commons-modal\").classList.remove('fadeOUT-display');\n            document.getElementById(\"gdpr-commons-modal-overlay\").classList.add('fadeIN-display');\n            document.getElementById(\"gdpr-commons-modal\").classList.add('fadeIN-display');\n        });\n\n    setTimeout(function() {\n        if (cookie == null) {\n            document.getElementById(\"gdpr-commons-modal-overlay\").classList.remove('fadeOUT-display');\n            document.getElementById(\"gdpr-commons-modal\").classList.remove('fadeOUT-display');\n            document.getElementById(\"gdpr-commons-modal-overlay\").classList.add('fadeIN-display');\n            document.getElementById(\"gdpr-commons-modal\").classList.add('fadeIN-display');\n        } else {\n            if (cookie.accepted != null && cookie.accepted == true) {\n                document.getElementById(\"last-consent-state\").innerHTML = config.text.textAccepted;\n            } else {\n                document.getElementById(\"last-consent-state\").innerHTML = config.text.textNotAccepted;\n                document.getElementById(\"gdpr-commons-modal-overlay\").classList.remove('fadeOUT-display');\n                document.getElementById(\"gdpr-commons-modal\").classList.remove('fadeOUT-display');\n                document.getElementById(\"gdpr-commons-modal-overlay\").classList.add('fadeIN-display');\n                document.getElementById(\"gdpr-commons-modal\").classList.add('fadeIN-display');\n            }\n            if (cookie.date != null) {\n                document.getElementById(\"last-consent-date\").innerHTML = new Date(cookie.date).toDateString();\n            } else {\n                document.getElementById(\"last-consent-date\").innerHTML = '0:00:00'\n            }\n        }\n    }, 2000);\n};"]}